---
layout: post
title: The six benefits of final
date: '2016-09-11T10:14:00.000-07:00'
author: Hans Kruse
tags: 
modified_time: '2018-08-17T03:32:09.872-07:00'
blogger_id: tag:blogger.com,1999:blog-1516417514149439988.post-4151860297578284171
blogger_orig_url: http://hcjkruse.blogspot.com/2016/09/the-six-benefits-of-final.html
---

<div>Ever since I returned to back to "the Duke side of the Force" I &nbsp;am pleased when I can type a specific word of 5 letters: <b>final. &nbsp;</b>Final means you cannot change it after it was set or defined. &nbsp;In functional programming languages <b>final </b>is the default and usually implicit. At the cost of five characters more verbosity per declaration you get the &nbsp;same six benefits functional languages give you for free. With final code is easier to:<br /><br /><ol><li>understand.</li><li>maintain.</li><li>document.</li><li>debug.</li><li>make parallel.</li><li>optimize for a compiler.</li></ol><br />In the rest of this post I will explore possible uses of the word final in Java.<br /><br /><h3>Final for constants</h3><div>Java has no keyword for constants but uses final. A constant in Java is defined within a class like:</div><div><br /></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">public static <b>final </b>int ULTIMATE_ANSWER = 42;</span>&nbsp;</div><h3><span style="font-size: small;"><span style="font-weight: normal;">Constants are written in SNAKE_CASE in Java. Really something to get used to if you come from some other environment. &nbsp;And yes <i>const </i>&nbsp;like in C#, or JavaScript is more succinct.&nbsp;</span></span><span style="font-size: small; font-weight: normal;">If you want to constrain the use more you can use package visibility, protected of private if you like.</span></h3>In more recent versions of Java enums can be used for the same purpose if you use int values.<br /><h3>Final for fields</h3><div>You can use final for fields. This enforces setting them in a constructor. Something like</div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><br /></span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">p</span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">ublic class DutchAddress{</span></span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; private <b>final </b>String street;</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; private <b>final </b>int number;</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; private <b>final </b>String postalCode;</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; private <b>final </b>String city;</span></div><div></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; public DutchAddress(String streetValue, //</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; int numberValue, //</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; String postalCodeValue, //</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; String cityValue){</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; //include some argument checking.</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; this.street = streetValue;</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; this.number = numberValue;</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; this.postalCode = postalCodeValue;</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; this.city = cityValue;&nbsp;</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; }</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp;//.. only add getters!</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">}</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: x-small;"><br /></span></div><div>If I do not add a constructor or only a default constructor I get a compile error.</div><div>Using the constructor as above I am sure DutchAddress never contains uninitialized values for its fields.&nbsp;</div><div><br /></div><div>Taking care of argument sanity is something for another blog post.</div><div>&nbsp;However making this constructor private and provide a factory is a possible solution if you do not want to throw exceptions in a constructor.</div><div><br /></div><div>For the remainder of this post we assume we do not use final for the fields.</div><br /><h3>Final in method signatures</h3><div>It is sometimes common practice to do argument checking on the arguments of a function and change the arguments value in the process. Something like the following.</div><div><br /></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">public class DutchAddress{</span></div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; private String street = "";</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;"><br /></span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; public void setStreet(String value){</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; if(value == null){</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp; value = "";</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; }</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; value = value.trim();</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; this.street = value;</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; }</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; //...</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">}</span><br /><br />Now imagine you are debugging the code above somewhere in the middle, or actually a bit more complicated code that does something similar. You cannot lookup the original value of <i>value</i>&nbsp;easily.<br /><br />At the cost of using final and introducing an extra variable you can be sure the original value can be seen when debugging. &nbsp;I change the code as follows:<br /><br /><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">public class DutchAddress{</span></div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; private String street = "";</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;"><br /></span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; public void setStreet(<b>final </b>String value){</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; String checkedValue = value;</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; if(checkedValue == null){</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">checkedValue&nbsp;</span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp;= "";</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; }</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp;&nbsp;</span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">checkedValue&nbsp;</span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">=</span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">checkedValue&nbsp;</span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">.trim();</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; this.street =&nbsp;</span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">checkedValue&nbsp;</span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">;</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; }</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; //...</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">}</span><br /><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: x-small;"><br /></span></div><br />Yes, I know:<br /><br /><ul><li>This argument only holds for non mutable types. But a lot of my coding involves ints and Strings as arguments.</li><li>&nbsp;I use <i>value </i>here as name of the argument instead of <i>street</i>. I think it is more DRY.</li></ul><div>Using final is a promise to the compiler, yourself, your later self and the guy after you, that you do not play tricks with the arguments.</div><div><br /></div><div>For a setter this is a bit verbose. I can improve on that and also lose the explicit temporary variable.</div><br /><i><br /></i><br /><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">public class DutchAddress{</span></div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; private String street = "";</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;"><br /></span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; public void setStreet(<b>final </b>String value){</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; this.street = (value == null?"":value).trim();</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; }</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; //...</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">}</span><br /><div><br /></div><h3>Final in the body of a method</h3></div><div>Final in the body of a method works a bit like a const but it can change on every invocation influenced by the arguments or the state of the object.</div><div><br /></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">public class DutchAddresses{</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; private final List&lt;DutchAddress&gt; addresses= //</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; new ArrayList&lt;DutchAddress&gt;;</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;"><br /></span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; public void addVerifiedAddress(final String street, //</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp;final &nbsp;intnumber, //</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp;final String postalCode, //</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; &nbsp; &nbsp;final String city){</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; //we assume the arguments are fine for now ;)</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; <b>final </b>DutchAddress address=new Address(street,number,postalCode,city);</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; //...</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp;&nbsp;</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; // do some amazing verifications here</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp;&nbsp;</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; //...</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;"><br /></span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; //we are certain the same address object we created earlier is added.</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; //Since DutchAddress is mutable it's fields may have changed.</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; addresses.add(address);</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;"><br /></span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">}</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: x-small;"><br /></span></div><div>Here I am sure that the reference to address never changes within the current call of the method once it is set.<br /><br /></div><div><h3>Final in for loops</h3><div>Java has a special kind of for loop that is known as an foreach loop in other languages.</div><div><br /></div><div>It has the following form:</div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">for (DutchAddress address :addresses){</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp;//do something with the address</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">}</span></div><div><br /></div><div>Unfortunately the reference to address is modifiable like with the method arguments without final keyword. You can do this.</div><div><br /></div><div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">for (DutchAddress address :addresses){</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp;//do something with the address</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp;address = new Address("Noordeinde",68,"2514GL","Den Haag");</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp;//do some more with the overwritten address</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">}</span></div></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: x-small;"><br /></span></div><div>The guy living at the newly instantiated address is lucky for multiple reasons! One reason is that he never ends up in our address list. &nbsp;To prevent such error superhero final rescues us.</div><div><br /></div><div><div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">for (<b>final</b> DutchAddress address :addresses){</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp;//do something with the address</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp;address = new Address("Noordeinde",68,"2514GL","Den Haag"); <b>// compile error</b></span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp;//do some more with the overwritten address</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">}</span><br /><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: x-small;"><br /></span></div></div></div><div>Every iteration an address is retrieved from the list of adresses which cannot be changed in the body of the loop. However since an instance of DutchAddress is mutable its fields can be changed.</div><div><br /></div><h3>Final at the class level</h3></div><h3><div style="font-size: medium;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: small;"><span style="font-weight: normal;">public </span>final <span style="font-weight: normal;">class DutchAddress{</span></span></div><div style="font-weight: normal;"><span style="font-size: small;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp;//</span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">..</span></span></div><div style="font-weight: normal;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: small;">}</span><br /><br /></div><div style="font-weight: normal;"><span style="font-size: small;">This means you never intended the class to be extended. It is a clear message to your later self and the guy after you in the role of maintainer. It also allows a compiler to do some optimizing.</span></div><div style="font-weight: normal;"><span style="font-size: small;"><br /></span></div><div style="font-weight: normal;"><span style="font-size: small;">Making a class extensible, aka non final places great responsibility on the base class designer. The guy extending your code may not have access to the source. So you must make it bullet proof and document the extension points very well. If someone is using extended code and it breaks in the base class who is to blame?</span><br /><span style="font-size: small;"><br /></span><br /><h3><span style="font-size: small;">Final at the method level</span></h3><div><span style="font-size: small;">Final at the method level is similar to final at the class level. It forbids overriding a method.</span></div><div><span style="font-size: small;">Since I usually make classes final I haven't used it in Java or the similar 'sealed' construct in C#. A crazy thing you can do to test your IDE with final is making an abstract method final. At least Eclipse gives the wrong advice about making the method public or protected.&nbsp;</span></div></div></h3><h3><div style="font-size: medium;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: small;"><span style="font-weight: normal;">public&nbsp;</span><span style="font-weight: normal;">class DutchAddress{</span></span></div><div style="font-weight: normal;"><div style="font-weight: normal;"><span style="font-size: small;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp;</span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">//</span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">..</span></span></div><span style="font-size: small;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;"><span style="font-weight: normal;">&nbsp;</span>final <span style="font-weight: normal;">boolean isValid(){</span></span></span><br />&nbsp; &nbsp; <span style="font-weight: normal;">//...</span><br /><div style="font-weight: normal;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="font-size: small;">&nbsp; }</span></span></div><div style="font-weight: normal;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="font-size: small;">}</span></span></div><div style="font-weight: normal;"><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;"><span style="font-size: small;"><br /></span></span></div><div style="font-weight: normal;"><br /></div></div></h3><h3><div style="font-weight: normal;"><div><span style="font-size: small;"></span></div><h3><span style="font-size: small;">Final in try with resources clause</span></h3><div><span style="font-size: small;">Since Java 7 try /catch is extended with the option to declare resources that get released when they get out of scope. This is similar to a .NET using clause &nbsp;but with the added benefit of being able to catch Exceptions. However in Java the references to the resources are mutable where they are 'final' in .NET. However you can make them immutable by declaring the resources final. Resources must implement the interface&nbsp;</span><span style="font-family: &quot;monaco&quot; , &quot;courier&quot; , &quot;courier new&quot;; font-size: 12.8px; line-height: 19.2px;">java.lang.AutoCloseable</span></div><div><span style="font-family: &quot;monaco&quot; , &quot;courier&quot; , &quot;courier new&quot;; font-size: 12.8px; line-height: 19.2px;"><br /></span></div><div><span style="font-size: small;">Example:</span></div><div><span style="font-size: small;"><br /></span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: small;">try( final MyAutoCloseableResource reader=new MyAutoCloseableResource()){</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: small;">&nbsp;//... do something</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: small;">}catch(Exeption ex){</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: small;">//... log something and do some exception handling</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: small;">}</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: small;">//.. here is an implicit finally clause closes the autocloseable if it is not null.</span></div><div><span style="font-size: small;"><br /></span></div><div><span style="font-size: small;">The added final makes sure we dot leak resources in the body of the try.</span></div></div></h3><h3>Disadvantages of final</h3><div>There are some disadvantages on final. First of all, it is not DRY because final is not the default in Java. You have to use it again and again to enforce it. Code checking tools like <a href="http://findbugs.sourceforge.net/">findbugs </a>or <a href="http://www.sonarqube.org/">Sonarqube</a>&nbsp;may help to discover violations and or enforce it.</div><div><br /></div><div>Second method signatures may become very long with multiple arguments.&nbsp;</div><div>It becomes worse if you also add argument validating decorators which will be the topic of another post. &nbsp;e.g. a method signature like</div><div><br /></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">p</span><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">ublic void addAddress(@NonNull final String streetValue, //</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp;&nbsp;@IntRange(from=1,to=9999) final int number, //</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; @NonNull String postalCodeValue, //</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">&nbsp; @NonNull String city){</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">//..</span></div><div><span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: xx-small;">}</span></div><div><br /></div><div>Third, a trick to test classes is to subclass them and override methods. Sorry you better use a proxy for that.</div><div><br /></div><div>&nbsp;Finally, making fields final in existing code is usually undoable without major API redesign.<br /><br /></div><h3>Recommendations</h3><div>I recommend making:</div><div><ul><li>classes&nbsp;final that you never intend to extend.</li><li>loop variables in a 'foreach' style for loop final.</li><li>arguments of methods final.</li><li>declared variables in methods final as much as possible.</li></ul></div><div>I think making fields final is hard. It goes against the Java Beans Idea and requires additional methods to make it usable by other programmers. In existing code it is not doable but perhaps your team can agree upon doing it on new code.<br /><br /></div><h3></h3><h3>Finally</h3>'Finally' is another nice keyword out of the scope for this blog post.<br />Yes I know about using specific types for street and postal code but that is out of scope too<i>.</i><br />If you are interested in that, read <a href="https://fsharpforfunandprofit.com/series/designing-with-types.html">Scott Wlaschin's excellent series on Desiging with types.</a><br />Also available as video conference talk via his website. Enforcing that style in an existing codebase may be an "interesting" exercise. In a next post I try doing that a bit using decorators.<br /><ul><li><i>What's your favorite keyword or language feature and why?</i></li><li><i>What is a valid use for final at the method level?</i></li><li><i>What is the maximum number of arguments you allow in a method?</i></li><li><i>What is the maximum number of characters you allow in a line of code?</i></li><li><i><strike>Tabs or spaces?</strike></i></li></ul><i><strike><br /></strike></i><br /><div><h3>What's Next</h3></div><div><ul><li>Decorators to constrain types.</li><li>Streams.</li><li>Automatic Getter/Setter and more testing for Beans.</li></ul></div><div><br /></div><div><br /></div>